(this.webpackJsonpimpact_frontend=this.webpackJsonpimpact_frontend||[]).push([[0],{119:function(e,t,n){},148:function(e,t,n){},194:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),s=(n(194),n(14)),o=n.n(s),l=n(23),u=n(4),j=n(317),d=n(311),m=n(304),b=n(318),p=n(309),f=n(316),h=n(305),x=n(302),O=n(103),g=n.n(O),v=n(175),y=n(299),w=n(312),k="http://35.222.122.87",C=function(e){var t={method:"POST",body:JSON.stringify(e)};return fetch(k+"/user/",t).then((function(e){return e.json()})).then((function(e){return e}))},S=function(e){var t={method:"POST",body:JSON.stringify(e)};return fetch(k+"/user/",t).then((function(e){return e.json()})).then((function(e){return e}))},N=function(e){var t={method:"POST",body:JSON.stringify(e)};return fetch(k+"/project/",t).then((function(e){return e.json()})).then((function(e){return e}))},I=function(e){var t={method:"POST",body:JSON.stringify(e)};return fetch(k+"/project/",t).then((function(e){return e.json()})).then((function(e){return e}))},D=function(e){var t={method:"POST",body:JSON.stringify(e)};return fetch(k+"/project/",t).then((function(e){return e.json()})).then((function(e){return e}))},P=n(37),E=n.n(P),A=(n(65),n(56),n(152)),T=n(29),_=n(21),F=(n(66),n(2)),z=Object(y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://wallup.net/wp-content/uploads/2019/09/135850-3d-architecture-pc-cad.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function L(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],O=i[1],y=Object(T.f)(),k=z(),C=function(){var e=Object(l.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",e.prev=2,n.trim().length||(r+="Please enter an email "),s.trim().length||(r+="Please enter a password !"),""===r){e.next=10;break}console.log(r),_.b.error("Please fill in all fields"),e.next=14;break;case 10:return e.next=12,S({email:n,password:s});case 12:"Wrong Password"===(a=e.sent).result?_.b.error("wrong password entered"):"No such email exists"===a.result?_.b.error("No such email exists"):(localStorage.setItem("email",n),y.push("/home"));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),console.log(e.t0),_.b.error("An error Occurred");case 20:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(x.a,{container:!0,component:"main",className:k.root,children:[Object(F.jsx)(m.a,{}),Object(F.jsx)(_.a,{}),Object(F.jsx)(x.a,{item:!0,xs:!1,sm:4,md:7,className:k.image}),Object(F.jsx)(x.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0,children:Object(F.jsxs)("div",{className:k.paper,children:[Object(F.jsx)(j.a,{className:k.avatar,children:Object(F.jsx)(g.a,{})}),Object(F.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(F.jsxs)("form",{className:k.form,noValidate:!0,onSubmit:C,children:[Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return a(e.target.value)}}),Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return O(e.target.value)}}),Object(F.jsx)(p.a,{control:Object(F.jsx)(f.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(F.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:C,className:k.submit,children:"Sign In"}),Object(F.jsx)("div",{style:{marginLeft:220},children:Object(F.jsx)(A.GoogleLogin,{clientId:"997321405617-nv43b35u845suv0epb4fkqrfu2jm86rd.apps.googleusercontent.com",buttonText:"Login With Google",onSuccess:function(e){console.log(e.profileObj.email),localStorage.setItem("email",e.profileObj.email),y.push("/home")},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin"})}),Object(F.jsx)(x.a,{item:!0,children:Object(F.jsx)(w.a,{href:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})}),Object(F.jsx)(E.a,{})]})}function W(e){return!!new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(e)}n(154);var M=Object(y.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://cdn.allwallpaper.in/wallpapers/1920x1200/4630/architecture-schematic-1920x1200-wallpaper.jpg)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function G(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],p=i[1],f=Object(r.useState)(""),O=Object(u.a)(f,2),y=O[0],w=O[1],k=Object(r.useState)(""),S=Object(u.a)(k,2),N=S[0],I=S[1],D=Object(T.f)(),P=function(){var e=Object(l.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",t.preventDefault(),e.prev=2,n.trim().length||(r+="Please enter a username ! \n"),s.trim().length||(r+="Please enter an Email ID ! \n"),y.trim().length||(r+="Please enter a password ! \n"),W(s)||(r+="Please enter a valid email ID ! \n"),y!==N&&(r+="Please enter matching passwords ! \n"),""===r){e.next=12;break}_.b.error("Please Fill In All Fields"),e.next=17;break;case 12:return e.next=14,C({name:n,email:s,password:y});case 14:a=e.sent,console.log(a),"failure"==a.result?_.b.error("Email Already Exists"):D.push("/login");case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0),_.b.error("An Error Occurred");case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}(),E=M();return Object(F.jsxs)(x.a,{container:!0,component:"main",className:E.root,children:[Object(F.jsx)(m.a,{}),Object(F.jsx)(_.a,{}),Object(F.jsx)(x.a,{item:!0,xs:!1,sm:4,md:7,className:E.image}),Object(F.jsx)(x.a,{item:!0,xs:12,sm:8,md:5,component:h.a,elevation:6,square:!0,children:Object(F.jsxs)("div",{className:E.paper,children:[Object(F.jsx)(j.a,{className:E.avatar,children:Object(F.jsx)(g.a,{})}),Object(F.jsx)(v.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(F.jsxs)("form",{className:E.form,noValidate:!0,onSubmit:P,children:[Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Username",name:"name",autoComplete:"name",autoFocus:!0,onChange:function(e){return a(e.target.value)}}),Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return p(e.target.value)}}),Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return w(e.target.value)}}),Object(F.jsx)(b.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirm",label:"Confirm Password",type:"password",id:"confirm",autoComplete:"confirm-current-password",onChange:function(e){return I(e.target.value)}}),Object(F.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:P,className:E.submit,children:"Sign Up"})]}),Object(F.jsx)(x.a,{item:!0,children:Object(F.jsx)("a",{href:"/login",variant:"body2",children:"Have an account? Login"})})]})})]})}var B,U,Y,q,J,R,V=n(34),X=n(63),H=n(172),K=n(64),$=K.a.nav(B||(B=Object(X.a)(["\n  background: #000;\n  height: 160px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((100vw - 1000px) / 2);\n  z-index: 10;\n  /* Third Nav */\n  /* justify-content: flex-start; */\n"]))),Q=Object(K.a)(V.b)(U||(U=Object(X.a)(["\n  color: #fff;\n  display: flex;\n  font-size: 20px;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #15cdfc;\n  }\n"]))),Z=Object(K.a)(H.a)(Y||(Y=Object(X.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),ee=K.a.div(q||(q=Object(X.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  /* Second Nav */\n  /* margin-right: 24px; */\n  /* Third Nav */\n  /* width: 100vw;\n  white-space: nowrap; */\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),te=K.a.nav(J||(J=Object(X.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  /* Third Nav */\n  /* justify-content: flex-end;\n  width: 100vw; */\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),ne=(Object(K.a)(V.b)(R||(R=Object(X.a)(["\n  border-radius: 4px;\n  background: #256ce1;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  /* Second Nav */\n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n  }\n"]))),n(313)),re=n.p+"static/media/logo.58667de1.jpg",ae=function(){var e=Object(T.f)();return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)($,{children:[Object(F.jsx)(Q,{to:"/#",children:Object(F.jsx)("img",{src:re,width:350,height:160,style:{marginLeft:-200},alt:"logo"})}),Object(F.jsx)(Z,{}),Object(F.jsxs)(ee,{children:[Object(F.jsx)(Q,{style:{textDecoration:"none"},to:"/home",activeStyle:!0,children:"Notification & Feeds"}),Object(F.jsx)(Q,{style:{textDecoration:"none"},to:"/addProjects",activeStyle:!0,children:"Add Project"}),Object(F.jsx)(Q,{style:{textDecoration:"none"},to:"/project",activeStyle:!0,children:"View Projects"})]}),Object(F.jsx)(te,{children:Object(F.jsx)(ne.a,{color:"primary",size:"large",variant:"extended",onClick:function(){localStorage.getItem("email")&&(localStorage.removeItem("email"),e.push("/login"))},children:"Logout"})})]})})},ce=(n(249),n(119),n(9)),ie=n(111),se=n(110),oe=n.n(se);function le(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],j=i[1],d=Object(r.useState)(""),m=Object(u.a)(d,2),b=m[0],p=m[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),x=h[0],O=h[1],g=Object(r.useState)(""),v=Object(u.a)(g,2),y=v[0],w=v[1],k=Object(r.useState)([]),C=Object(u.a)(k,2),S=C[0],I=C[1],D=Object(r.useState)([]),P=Object(u.a)(D,2),E=P[0],A=P[1],z=Object(r.useState)([]),L=Object(u.a)(z,2),W=L[0],M=L[1],G=Object(T.f)(),B=localStorage.getItem("email"),U=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,n.trim().length&&s.trim().length&&0!==S.length&&0!==E.length&&0!==W.length){e.next=6;break}_.b.error("Please fill in all fields"),e.next=17;break;case 6:return e.next=8,N({email:B,name:n,description:s,worktypes:S,contractors:E,users:W,action:"Add"});case 8:if("failure"!==e.sent.result){e.next=13;break}_.b.error("An error occurred !"),e.next=17;break;case 13:return e.next=15,N({email:B,notification:"".concat(new Date," -  Project Added : Name ").concat(n),action:"NOTIFICATION"});case 15:"success"===e.sent.result?G.push("/project"):_.b.error("An error occurred !");case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e,t){if("work"==t){var n=S.indexOf(e);S.splice(n,1),I(Object(ce.a)(S))}else if("contractor"==t){var r=E.indexOf(e);E.splice(r,1),A(Object(ce.a)(E))}else{var a=W.indexOf(e);W.splice(a,1),M(Object(ce.a)(W))}},q=function(e,t){"work"===t?(S.push(e),I(Object(ce.a)(S))):"contract"===t?(E.push(e),A(Object(ce.a)(E))):"user"===t&&(W.push(e),M(Object(ce.a)(W)))};return Object(F.jsxs)("div",{className:"form-content-right",style:{overflowY:"scroll",overflowX:"scroll"},children:[Object(F.jsx)(_.a,{}),Object(F.jsxs)("form",{onSubmit:U,className:"form",noValidate:!0,children:[Object(F.jsxs)("div",{className:"form-inputs",children:[Object(F.jsx)("label",{className:"form-label",children:"Name"}),Object(F.jsx)("input",{className:"form-input",type:"text",name:"name",placeholder:"Enter Project Name",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-inputs",children:[Object(F.jsx)("label",{className:"form-label",children:"Description"}),Object(F.jsx)("textarea",{className:"form-input",rows:6,cols:10,placeholder:"Enter Project Description",value:s,onChange:function(e){return j(e.target.value)}})]}),Object(F.jsxs)("div",{className:"form-inputs",children:[Object(F.jsx)("label",{className:"form-label",children:"Worktypes"}),Object(F.jsx)("input",{className:"form-input",type:"text",name:"Worktypes",placeholder:"Add Project Worktypes",value:b,onChange:function(e){return p(e.target.value)}}),S.length>0?S.map((function(e){return Object(F.jsxs)(ne.a,{color:"primary",size:"small",variant:"extended",children:[e," ",Object(F.jsx)(oe.a,{onClick:function(){return Y(e,"work")}})]})})):"",Object(F.jsx)("div",{style:{left:520,position:"absolute",bottom:300},children:Object(F.jsx)(ie.a,{style:{backgroundColor:"thistle",width:70,height:30},variant:"primary",onClick:function(){return q(b,"work")},children:" Add "})})]}),Object(F.jsxs)("div",{className:"form-inputs",children:[Object(F.jsx)("label",{className:"form-label",children:"Contracters"}),Object(F.jsx)("input",{className:"form-input",type:"text",name:"contractors",placeholder:"Add Project Contractos",onChange:function(e){return O(e.target.value)}}),E.length>0?E.map((function(e){return Object(F.jsxs)(ne.a,{color:"primary",size:"small",variant:"extended",children:[e," ",Object(F.jsx)(oe.a,{onClick:function(){return Y(e,"contractor")}})]})})):"",Object(F.jsx)(ie.a,{style:{backgroundColor:"thistle",width:70,height:30,left:520,position:"absolute",bottom:220},variant:"primary",onClick:function(){return q(x,"contract")},children:" Add "})]}),Object(F.jsxs)("div",{className:"form-inputs",children:[Object(F.jsx)("label",{className:"form-label",children:"Users"}),Object(F.jsx)("input",{className:"form-input",type:"text",name:"users",placeholder:"Add Project Users",onChange:function(e){return w(e.target.value)}}),W.length>0?W.map((function(e){return Object(F.jsxs)(ne.a,{color:"primary",size:"small",variant:"extended",children:[e," ",Object(F.jsx)(oe.a,{onClick:function(){return Y(e,"user")}})]})})):"",Object(F.jsx)(ie.a,{style:{backgroundColor:"thistle",width:70,height:30,left:520,position:"absolute",bottom:140},variant:"primary",onClick:function(){return q(y,"user")},children:" Add "})]}),Object(F.jsx)("button",{className:"form-input-btn",type:"submit",children:"Add Project"})]})]})}var ue=function(){return Object(F.jsxs)("div",{className:"form-content-right",children:[Object(F.jsx)("h1",{className:"form-success",children:"We have received your request!"}),Object(F.jsx)("img",{className:"form-img-2",src:"img/img-3.svg",alt:"success-image"})]})},je=n.p+"static/media/image4.e506e61f.jpg",de=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{className:"form-container",children:[Object(F.jsx)("div",{className:"form-content-left",children:Object(F.jsx)("img",{className:"form-img",src:je,alt:"CAD"})}),n?Object(F.jsx)(ue,{}):Object(F.jsx)(le,{submitForm:function(){a(!0)}})]})})};var me=function(e){return Object(F.jsxs)("div",{children:[Object(F.jsx)(ae,{}),Object(F.jsx)(de,{})]})},be=(n(148),n(75)),pe=n.n(be),fe=(n(149),n(314));var he=function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],i=localStorage.getItem("email"),s=Object(T.f)(),j=function(){var e=Object(l.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({id:t,action:"DELETE_PROJECT"});case 2:if("success"!==e.sent.result){e.next=8;break}return d(),e.next=7,I({email:i,notification:"".concat(new Date," -  Deleted Project : Project ").concat(n),action:"NOTIFICATION"});case 7:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({email:i,action:"GET"});case 3:"Failure"!==(t=e.sent).result&&c(t.result),console.log(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){d()}),[a.length]),Object(F.jsxs)("div",{children:[Object(F.jsx)(ae,{}),a.map((function(e,t){return Object(F.jsxs)(fe.a,{style:{margin:25,width:"80%"},type:"inner",title:e.name,extra:Object(F.jsxs)("div",{children:[Object(F.jsx)("a",{href:"/edit/".concat(e._id),children:"Edit"}),Object(F.jsx)("a",{style:{color:"red",marginLeft:"10px"},onClick:function(){return j(e._id,e.name)},children:"Delete"})]}),children:["Description : ",e.description,e.worktypes.map((function(e){return Object(F.jsxs)("li",{children:[" Worktype : ",e," "]})})),e.contractors.map((function(e){return Object(F.jsxs)("li",{children:[" Contractor : ",e," "]})})),e.users.map((function(e){return Object(F.jsxs)("li",{children:[" User : ",e]})}))]},t)})),Object(F.jsx)(ne.a,{style:{position:"fixed",right:"2%"},onClick:function(){s.push("/addProjects")},color:"primary","aria-label":"add",children:Object(F.jsx)(pe.a,{})})]})},xe=n(168),Oe=n.n(xe),ge=(n(256),n(62));function ve(e){var t=Object(T.f)(),n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(),j=Object(u.a)(s,2),d=(j[0],j[1],Object(r.useState)(!1)),m=Object(u.a)(d,2),b=m[0],p=m[1],f=Object(r.useState)(),h=Object(u.a)(f,2),x=h[0],O=h[1],g=Object(r.useState)([]),v=Object(u.a)(g,2),y=v[0],w=v[1],C=Object(r.useState)(!1),S=Object(u.a)(C,2),N=S[0],P=S[1],E=localStorage.getItem("email"),A=Object(T.g)("id").id;Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({id:A,action:"GET_BY_ID"});case 2:return t=e.sent,console.log(t.result),i([t.result]),e.next=7,D({id:A,action:"GET_IMAGE_BY_ID"});case 7:if("Failure"!==(n=e.sent).result){for(r=0;r<n.result.length;r++)"worktype"in n.result[r]&&"contractor"in n.result[r]&&"description"in n.result[r]&&(console.log(!0),P(!0));w(n.result)}case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[y.length]);var z=function(e,n){t.push({pathname:"/filterCAD/".concat(e,"/").concat(A),state:{detail:n}})},L=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(x),(n=new FormData).append("file",x,x.name),n.append("id",A),n.append("type",x.type),e.next=8,fetch(k+"/project/",{method:"PUT",body:n}).then((function(e){return e.json()})).then((function(e){return e}));case 8:if("success"!==e.sent.result){e.next=14;break}return _.b.success("CAD Uploaded. Please Refresh Page !"),e.next=13,I({email:E,notification:"".concat(new Date," -  Uploaded CAD : ").concat(x.name),action:"NOTIFICATION"});case 13:e.sent;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{children:[Object(F.jsx)(ae,{}),Object(F.jsx)(_.a,{}),c.map((function(e){return Object(F.jsxs)(fe.a,{style:{margin:20,width:"95%"},type:"inner",title:"Project Name : "+e.name,extra:Object(F.jsxs)("div",{children:[Object(F.jsx)(Oe.a,{withPreview:!0,withLabel:!0,withIcon:!0,buttonText:"Select Image",singleImage:!0,onChange:function(e){return function(e){O(e[0]),p(!0)}(e)},imgExtension:[".jpg",".gif",".png",".jiff",".dwg"],maxFileSize:5242880}),b?Object(F.jsx)(ne.a,{style:{marginLeft:"60px"},variant:"extended",color:"primary",size:"large",onClick:L,children:"Upload"}):Object(F.jsx)(F.Fragment,{})]}),children:[Object(F.jsx)("b",{children:"Description"})," : ",e.description,e.worktypes.map((function(e){return Object(F.jsxs)("li",{children:[" ",Object(F.jsx)("b",{children:"Worktype"})," : ",e," "]})})),e.contractors.map((function(e){return Object(F.jsxs)("li",{children:[" ",Object(F.jsx)("b",{children:"Contractor"})," : ",e," "]})})),e.users.map((function(e){return Object(F.jsxs)("li",{children:[" ",Object(F.jsx)("b",{children:"User"})," : ",e]})}))]},e._id)})),Object(F.jsx)("div",{style:{content:"",clear:"both",display:"table"},children:y.map((function(e,t){return Object(F.jsx)("div",{style:{marginLeft:"40px",float:"left",width:"30%",paddign:"50px",marginTop:"20px"},children:N?Object(F.jsxs)(ge.a,{className:"anime",style:{width:"400",height:"300"},children:[Object(F.jsx)(ge.a.Img,{variant:"top",src:e.image}),Object(F.jsx)(ge.a.Body,{children:Object(F.jsx)(ne.a,{size:"medium",style:{marginLeft:120},variant:"extended",color:"primary",onClick:function(){return z(e._id,e.image)},children:" Filter Image "})})]}):Object(F.jsx)("img",{src:e.image,style:{cursor:"grabbing"},width:"400px",height:"300px",onClick:function(){return z(e._id,e.image)}})},t)}))}),Object(F.jsx)(ne.a,{style:{position:"fixed",right:"2%"},onClick:function(){t.push("/addProjects")},color:"primary","aria-label":"add",children:Object(F.jsx)(pe.a,{})})]})}var ye=function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],i=localStorage.getItem("email");return Object(T.f)(),Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({email:i,action:"GET_NOTIFICATION"});case 2:t=e.sent,c(t.result.notifications);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a.length]),Object(F.jsxs)("div",{children:[Object(F.jsx)(ae,{}),a.map((function(e){return Object(F.jsx)("div",{style:{margin:20},children:Object(F.jsx)(ge.a,{children:Object(F.jsx)(ge.a.Body,{children:e})})})}))]})},we=n(6),ke=n(5),Ce=n(129),Se=n(169),Ne=n(170),Ie=n.n(Ne),De=n(310),Pe=n(171),Ee=n.n(Pe),Ae=(n(120),n(108)),Te=n(82),_e=n(86),Fe=n(84),ze=n(83),Le=n(308),We=n(315),Me=n(320),Ge=n(321),Be=n(93);function Ue(e){var t=Object(y.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}))(),n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),j=Object(u.a)(s,2),d=j[0],m=j[1],b=Object(r.useState)(""),p=Object(u.a)(b,2),f=p[0],h=p[1],x=Object(r.useState)(""),O=Object(u.a)(x,2),g=O[0],v=O[1],w=Object(r.useState)(new Date),k=Object(u.a)(w,2),C=k[0],S=k[1],N=Object(T.g)("id").id,P=localStorage.getItem("email"),E=Object(T.g)("project_id").project_id,A=e.image,z=e.element,L=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({id:E,action:"GET_BY_ID"});case 2:t=e.sent,console.log(t.result),i([t.result]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==d||""!==f||""!==g){e.next=5;break}_.b.error("Please fill in all fields"),e.next=16;break;case 5:return e.next=7,D({id:N,worktype:d,contractor:f,description:g,element:z,action:"UPDATE_IMAGE_BY_ID"});case 7:if("failure"!=e.sent.result){e.next=12;break}_.b.error("An error occurred"),e.next=16;break;case 12:return _.b.success("Successfull Filtered CAD"),e.next=15,I({email:P,notification:"".concat(new Date," -  Saved Marking"),action:"NOTIFICATION"});case 15:e.sent;case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){console.log(C),L()}),[]),Object(F.jsxs)(Ae.a,{size:"xl",show:e.open,onHide:e.handleClose,className:"modal-container custom-map-modal",animation:!0,children:[Object(F.jsx)(_.a,{}),Object(F.jsxs)(_e.a,{closeButton:!0,children:[Object(F.jsx)(ne.a,{size:"large",variant:"extended",color:"primary",onClick:function(){var e=new Be.default;e.setFontSize(40),e.text(30,20,"Filtered CAD Drawing !"),e.addImage(A,"JPEG",15,40,180,160),e.output("CADImage"),e.text(30,220,"Worktype :  ".concat(d)),e.text(30,240,"Contractor :  ".concat(f)),e.text(30,260,"Description :  ".concat(g)),e.text(30,280,"Date :  ".concat(C)),e.save("CAD.pdf")},children:"Generate PDF"}),Object(F.jsx)(ze.a,{style:{marginLeft:350},children:"Add CAD"})]}),Object(F.jsx)(Te.a,{style:{height:300},className:"w-100 p-3",children:Object(F.jsxs)("form",{onSubmit:W,className:"form",noValidate:!0,children:[Object(F.jsxs)(Le.a,{className:t.formControl,children:[Object(F.jsx)(Me.a,{id:"demo-simple-select-label",children:"Worktype"}),Object(F.jsx)(We.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d,onChange:function(e){return m(e.target.value)},children:c.map((function(e){return e.worktypes.map((function(e){return Object(F.jsx)(Ge.a,{value:e,children:e})}))}))})]}),Object(F.jsxs)(Le.a,{className:t.formControl,children:[Object(F.jsx)(Me.a,{id:"demo-simple-select-label",children:"Contractor"}),Object(F.jsx)(We.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:f,onChange:function(e){return h(e.target.value)},children:c.map((function(e){return e.contractors.map((function(e){return Object(F.jsx)(Ge.a,{value:e,children:e})}))}))})]}),Object(F.jsxs)("div",{style:{marginLeft:-10},children:[Object(F.jsx)("label",{className:"form-label",children:"Description"}),Object(F.jsx)("textarea",{className:"form-input",rows:6,cols:20,placeholder:"Enter Project Description",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(F.jsx)("label",{className:"form-label",children:"Date"}),Object(F.jsx)("input",{type:"date",value:C,onChange:function(e){return S(e.target.value)}})]})}),Object(F.jsx)(Fe.a,{children:Object(F.jsx)(ne.a,{color:"primary",size:"large",variant:"extended",onClick:W,children:"Save Markings"})})]})}function Ye(e){var t=Object(y.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}))(),n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),j=Object(u.a)(s,2),d=j[0],m=j[1],b=Object(r.useState)(""),p=Object(u.a)(b,2),f=p[0],h=p[1],x=Object(T.g)("id").id,O=Object(T.g)("project_id").project_id,g=(e.image,e.element,localStorage.getItem("email")),v=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({id:O,action:"GET_BY_ID"});case 2:t=e.sent,console.log(t.result),i([t.result]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Object(l.a)(o.a.mark((function t(n){var r,a,c,i,s,l,u,j,m,b,p,h,O,v,y,w,k,C,S;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),[],t.next=4,D({id:x,action:"GET_IMAGE_BY_IDs"});case 4:if(r=t.sent,""===f&&""==d)_.b.error("Plesae Select a filed");else if(""!==f&&""!==d)for(a=0;a<r.result.contractor.length;a++)r.result.contractor[a]===f&&r.result.worktype[a]===d&&(c=r.result.elements[a][0].id,i=r.result.elements[a][0].x1,s=r.result.elements[a][0].y1,l=r.result.elements[a][0].x2,u=r.result.elements[a][0].y2,e.filteredCAD(c,i,l,s,u));else if(""!==f)for(j=0;j<r.result.contractor.length;j++)r.result.contractor[j]===f&&(m=r.result.elements[j][0].id,b=r.result.elements[j][0].x1,p=r.result.elements[j][0].y1,h=r.result.elements[j][0].x2,O=r.result.elements[j][0].y2,e.filteredCAD(m,b,h,p,O));else if(""!==d)for(v=0;v<r.result.worktype.length;v++)r.result.worktype[v]===d&&(y=r.result.elements[v][0].id,w=r.result.elements[v][0].x1,k=r.result.elements[v][0].y1,C=r.result.elements[v][0].x2,S=r.result.elements[v][0].y2,e.filteredCAD(y,w,C,k,S));return t.next=8,I({email:g,notification:"".concat(new Date," -  Filtered Marking"),action:"NOTIFICATION"});case 8:t.sent;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){v()}),[]),Object(F.jsxs)(Ae.a,{size:"xl",show:e.open,onHide:e.handleClose,className:"modal-container custom-map-modal",animation:!0,children:[Object(F.jsx)(_.a,{}),Object(F.jsx)(_e.a,{closeButton:!0,children:Object(F.jsx)(ze.a,{style:{marginLeft:500},children:"Filter CAD"})}),Object(F.jsx)(Te.a,{style:{height:300},className:"w-100 p-3",children:Object(F.jsxs)("form",{onSubmit:w,className:"form",noValidate:!0,children:[Object(F.jsxs)(Le.a,{className:t.formControl,children:[Object(F.jsx)(Me.a,{id:"demo-simple-select-label",children:"Worktype"}),Object(F.jsxs)(We.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d,onChange:function(e){return m(e.target.value)},children:[Object(F.jsx)(Ge.a,{value:"",children:"None"}),c.map((function(e){return e.worktypes.map((function(e){return Object(F.jsx)(Ge.a,{value:e,children:e})}))}))]})]}),Object(F.jsxs)(Le.a,{className:t.formControl,children:[Object(F.jsx)(Me.a,{id:"demo-simple-select-label",children:"Contractor"}),Object(F.jsxs)(We.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:f,onChange:function(e){return h(e.target.value)},children:[Object(F.jsx)(Ge.a,{value:"",children:"None"}),c.map((function(e){return e.contractors.map((function(e){return Object(F.jsx)(Ge.a,{value:e,children:e})}))}))]})]})]})}),Object(F.jsx)(Fe.a,{children:Object(F.jsx)(ne.a,{color:"primary",size:"large",variant:"extended",onClick:w,children:"Filter Markings"})})]})}n(261);var qe=function(e){var t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)([]),s=Object(u.a)(i,4),j=s[0],d=s[1],m=s[2],b=s[3],p=Object(r.useState)(null),f=Object(u.a)(p,2),h=f[0],x=f[1],O=Object(r.useState)(!1),g=Object(u.a)(O,2),v=g[0],y=g[1],w=Object(r.useState)(e.location.state.detail),k=Object(u.a)(w,2),C=k[0],S=k[1],N=Object(r.useState)(""),I=Object(u.a)(N,2),P=I[0],E=I[1],A=Object(r.useState)(!1),_=Object(u.a)(A,2),z=_[0],L=_[1],W=Object(r.createRef)(null),M=Object(Se.a)(),G=Object(u.a)(M,2),B=(G[0],G[1]),U=function(){return B(W.current)},Y=Object(T.g)("id").id,q=(Object(T.g)("project_id").project_id,e.location.state.detail),J=Ce.a.generator();Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,r,a,c,i,s,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],console.log(Y),e.next=4,D({id:Y,action:"GET_IMAGE_BY_IDs"});case 4:if("elements"in(n=e.sent).result){for(r=0;r<n.result.elements.length;r++)a=n.result.elements[r][0].id,c=n.result.elements[r][0].x1,i=n.result.elements[r][0].y1,s=n.result.elements[r][0].x2,l=n.result.elements[r][0].y2,u=R(a,c,i,s,l),console.log(u),t.push(u);d((function(e){return[].concat(Object(ce.a)(e),t)}))}case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){var e=function(e){(e.metaKey||e.ctrlKey)&&"z"===e.key&&(e.shiftKey?b():m())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[m,b]),Object(r.useLayoutEffect)((function(){var e=document.getElementById("canvas");e.getContext("2d").clearRect(0,0,e.width,e.height);var t=Ce.a.canvas(e);j.forEach((function(e){var n=e.roughElement;return t.draw(n)}))}),[j]);var R=function(e,t,n,r,a){return{id:e,x1:t,y1:n,x2:r,y2:a,roughElement:J.rectangle(t,n,r-t,a-n)}},V=function(e,t,n,r,a){var c=R(e,t,n,r,a);console.log(j);var i=Object(ce.a)(j);i[e]=c,console.log(i),d(i)},X=[],H=function(e,t,n,r,a){return Math.abs(e-n)<5&&Math.abs(t-r)<5?a:null},K=function(e,t,n){var r=n.x1,a=n.x2,c=n.y1,i=n.y2,s=H(e,t,r,c,"tl"),o=H(e,t,a,c,"tr"),l=H(e,t,r,i,"bl"),u=H(e,t,a,i,"br");return s||o||l||u||(e>=r&&e<=a&&t>=c&&t<=i?"inside":null)},$=function(e,t,n){return n.map((function(n){return Object(ke.a)(Object(ke.a)({},n),{},{position:K(e,t,n)})})).find((function(e){return null!==e.position}))},Q=function(){if(h){var e=h.id,t=j[e].id;if("drawing"===a||"resizing"===a){var n=function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2,c=Math.min(t,r),i=Math.max(t,r);return{x1:c,y1:Math.min(n,a),x2:i,y2:Math.max(n,a)}}(j[e]),r=n.x1,i=n.y1,s=n.x2,o=n.y2;V(t,r,i,s,o)}}c("none"),x(null)};return Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{ref:W,children:Object(F.jsx)("div",{style:{backgroundImage:"url(".concat(q,")"),height:650,width:"100%"},children:Object(F.jsx)("canvas",{id:"canvas",width:window.innerWidth,height:window.innerHeight,onMouseDown:function(e){return function(e){var t=e.clientX,n=e.clientY;if("selection"===P){var r=$(t,n,j);if(r){var a=t-r.x1,i=n-r.y1;x(Object(ke.a)(Object(ke.a)({},r),{},{offsetX:a,offsetY:i})),d((function(e){return e})),"inside"===r.position?c("moving"):c("resizing")}}else{var s=j.length,o=R(s,t,n,t,n);d((function(e){return[].concat(Object(ce.a)(e),[o])})),x(o),c("drawing")}}(e)},onMouseMove:function(e){return function(e){var t=e.clientX,n=e.clientY;if("selection"===P){var r=$(t,n,j);e.target.style.cursor=r?function(e){switch(e){case"tl":case"br":case"start":case"end":return"nwse-resize";case"tr":case"bl":return"nesw-resize";default:return"move"}}(r.position):"default"}if("drawing"==a){var c=j.length-1,i=j[c],s=i.x1,o=i.y1;V(c,s,o,t,n)}else if("moving"==a){var l=h.id,u=h.x1,d=h.x2,m=h.y1,b=h.y2,p=t-h.offsetX,f=n-h.offsetY;V(l,p,f,p+(d-u),f+(b-m))}else if("resizing"===a){var x=h.id,O=function(e,t,n,r){var a=r.x1,c=r.y1,i=r.x2,s=r.y2;switch(n){case"tl":case"start":return{x1:e,y1:t,x2:i,y2:s};case"tr":return{x1:a,y1:t,x2:e,y2:s};case"bl":return{x1:e,y1:c,x2:i,y2:t};case"br":case"end":return{x1:a,y1:c,x2:e,y2:t};default:return null}}(t,n,h.position,Object(we.a)(h,["id","position"])),g=O.x1,v=O.y1,y=O.x2,w=O.y2;V(x,g,v,y,w)}}(e)},onMouseUp:Q,onMouseLeave:Q,children:"Canvas"})})}),Object(F.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginLeft:"700px",marginTop:"30px"},children:[Object(F.jsx)("h1",{children:"Edit Image"}),Object(F.jsxs)("div",{style:{marginTop:50,marginLeft:-200},children:[Object(F.jsx)("input",{style:{margin:10},type:"radio",id:"draw",checked:"draw"===P,onChange:function(){return E("draw")}}),Object(F.jsx)("label",{htmlFor:"draw",children:"Draw "}),Object(F.jsx)("input",{style:{margin:10},type:"radio",id:"selection",checked:"selection"===P,onChange:function(){return E("selection")}}),Object(F.jsx)("label",{htmlFor:"selection",children:"Selection "})]}),Object(F.jsx)(De.a,{onClick:function(){y(!0),U().then((function(e){S(e)}))},color:"primary",style:{position:"absolute",right:"1%"},component:"span",children:Object(F.jsx)(Ie.a,{style:{width:70,height:70}})}),Object(F.jsx)(De.a,{onClick:function(){L(!0),d([])},color:"primary",style:{position:"absolute",right:"6%"},component:"span",children:Object(F.jsx)(Ee.a,{style:{width:70,height:70}})})]}),v?Object(F.jsx)(Ue,{image:C,element:j,open:function(){return y(!0)},handleClose:function(){return y(!1)},backdrop:"static"}):null,z?Object(F.jsx)(Ye,{filteredCAD:function(e,t,n,r,a){var c=R(e,t,r,n,a);X.push(c),d((function(e){return[].concat(Object(ce.a)(e),X)}))},image:C,images:function(){U().then((function(e){S(e)}))},element:j,open:function(){return L(!0)},handleClose:function(){return L(!1)},backdrop:"static"}):null]})};var Je=function(){return Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(V.a,{children:Object(F.jsxs)(T.c,{children:[Object(F.jsx)(T.a,{exact:!0,path:"/",component:L}),Object(F.jsx)(T.a,{exact:!0,path:"/login",component:L}),Object(F.jsx)(T.a,{exact:!0,path:"/signup",component:G}),Object(F.jsx)(T.a,{exact:!0,path:"/home",component:ye}),Object(F.jsx)(T.a,{exact:!0,path:"/project",component:he}),Object(F.jsx)(T.a,{exact:!0,path:"/addProjects",component:me}),Object(F.jsx)(T.a,{exact:!0,path:"/edit/:id",component:ve}),Object(F.jsx)(T.a,{exact:!0,path:"/filterCAD/:id/:project_id",component:qe})]})})})},Re=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,693)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(Je,{})}),document.getElementById("root")),Re()}},[[262,1,3]]]);
//# sourceMappingURL=main.6c620034.chunk.js.map